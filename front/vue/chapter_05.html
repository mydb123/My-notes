<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3.0 | notes</title>
    <meta name="description" content="notes">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/My-notes/icons/favicon.ico">
  <link rel="manifest" href="/My-notes/manifest.json">
    
    <link rel="preload" href="/My-notes/assets/css/0.styles.5acd7f6f.css" as="style"><link rel="preload" href="/My-notes/assets/js/app.4737a346.js" as="script"><link rel="preload" href="/My-notes/assets/js/2.a0b16310.js" as="script"><link rel="preload" href="/My-notes/assets/js/48.fb967445.js" as="script"><link rel="preload" href="/My-notes/assets/js/3.d5588be5.js" as="script"><link rel="prefetch" href="/My-notes/assets/js/10.5843ef77.js"><link rel="prefetch" href="/My-notes/assets/js/11.2a59bee2.js"><link rel="prefetch" href="/My-notes/assets/js/12.0a204681.js"><link rel="prefetch" href="/My-notes/assets/js/13.55640c4f.js"><link rel="prefetch" href="/My-notes/assets/js/14.9b3ca50b.js"><link rel="prefetch" href="/My-notes/assets/js/15.12f7189f.js"><link rel="prefetch" href="/My-notes/assets/js/16.be011681.js"><link rel="prefetch" href="/My-notes/assets/js/17.2ba8a379.js"><link rel="prefetch" href="/My-notes/assets/js/18.56372e6c.js"><link rel="prefetch" href="/My-notes/assets/js/19.9f5d31ae.js"><link rel="prefetch" href="/My-notes/assets/js/20.cf4ac4c9.js"><link rel="prefetch" href="/My-notes/assets/js/21.53a5318f.js"><link rel="prefetch" href="/My-notes/assets/js/22.ef05bad2.js"><link rel="prefetch" href="/My-notes/assets/js/23.195f444b.js"><link rel="prefetch" href="/My-notes/assets/js/24.f49c3b02.js"><link rel="prefetch" href="/My-notes/assets/js/25.01a1aa64.js"><link rel="prefetch" href="/My-notes/assets/js/26.35b5afbb.js"><link rel="prefetch" href="/My-notes/assets/js/27.136fa701.js"><link rel="prefetch" href="/My-notes/assets/js/28.0a7632d4.js"><link rel="prefetch" href="/My-notes/assets/js/29.0e8347d1.js"><link rel="prefetch" href="/My-notes/assets/js/30.b7bd14d2.js"><link rel="prefetch" href="/My-notes/assets/js/31.f8f6b4b3.js"><link rel="prefetch" href="/My-notes/assets/js/32.eb5bb152.js"><link rel="prefetch" href="/My-notes/assets/js/33.25eef7c4.js"><link rel="prefetch" href="/My-notes/assets/js/34.96197e28.js"><link rel="prefetch" href="/My-notes/assets/js/35.b13aa4fe.js"><link rel="prefetch" href="/My-notes/assets/js/36.3ca667b5.js"><link rel="prefetch" href="/My-notes/assets/js/37.bd07831c.js"><link rel="prefetch" href="/My-notes/assets/js/38.494bc69f.js"><link rel="prefetch" href="/My-notes/assets/js/39.e38958ef.js"><link rel="prefetch" href="/My-notes/assets/js/4.f5922a63.js"><link rel="prefetch" href="/My-notes/assets/js/40.9fb2ff2a.js"><link rel="prefetch" href="/My-notes/assets/js/41.2842db22.js"><link rel="prefetch" href="/My-notes/assets/js/42.6c2aedfe.js"><link rel="prefetch" href="/My-notes/assets/js/43.460b13ad.js"><link rel="prefetch" href="/My-notes/assets/js/44.ec48300d.js"><link rel="prefetch" href="/My-notes/assets/js/45.0834d781.js"><link rel="prefetch" href="/My-notes/assets/js/46.53fcc533.js"><link rel="prefetch" href="/My-notes/assets/js/47.fbb6eed6.js"><link rel="prefetch" href="/My-notes/assets/js/49.ff1f2c5a.js"><link rel="prefetch" href="/My-notes/assets/js/5.5a688d0c.js"><link rel="prefetch" href="/My-notes/assets/js/50.1ae87e9f.js"><link rel="prefetch" href="/My-notes/assets/js/51.11411be8.js"><link rel="prefetch" href="/My-notes/assets/js/52.bdf04910.js"><link rel="prefetch" href="/My-notes/assets/js/53.35119a03.js"><link rel="prefetch" href="/My-notes/assets/js/54.a06d1a30.js"><link rel="prefetch" href="/My-notes/assets/js/55.0d8320cc.js"><link rel="prefetch" href="/My-notes/assets/js/56.e9cf1d30.js"><link rel="prefetch" href="/My-notes/assets/js/57.24f5552d.js"><link rel="prefetch" href="/My-notes/assets/js/58.5dfc12c1.js"><link rel="prefetch" href="/My-notes/assets/js/59.2bf18f89.js"><link rel="prefetch" href="/My-notes/assets/js/6.f345e186.js"><link rel="prefetch" href="/My-notes/assets/js/60.2dde4226.js"><link rel="prefetch" href="/My-notes/assets/js/61.d27ddebe.js"><link rel="prefetch" href="/My-notes/assets/js/62.bb1d608e.js"><link rel="prefetch" href="/My-notes/assets/js/63.37cf5d17.js"><link rel="prefetch" href="/My-notes/assets/js/64.71309c9b.js"><link rel="prefetch" href="/My-notes/assets/js/65.399e899a.js"><link rel="prefetch" href="/My-notes/assets/js/66.41605efc.js"><link rel="prefetch" href="/My-notes/assets/js/67.aefa3914.js"><link rel="prefetch" href="/My-notes/assets/js/68.e523b115.js"><link rel="prefetch" href="/My-notes/assets/js/69.727440ab.js"><link rel="prefetch" href="/My-notes/assets/js/7.6d0d566b.js"><link rel="prefetch" href="/My-notes/assets/js/70.a75d31f4.js"><link rel="prefetch" href="/My-notes/assets/js/71.3bf1a057.js"><link rel="prefetch" href="/My-notes/assets/js/72.5023c4c8.js"><link rel="prefetch" href="/My-notes/assets/js/73.d27eb3f5.js"><link rel="prefetch" href="/My-notes/assets/js/74.9c921e4b.js"><link rel="prefetch" href="/My-notes/assets/js/75.7bac6d69.js"><link rel="prefetch" href="/My-notes/assets/js/76.0413e509.js"><link rel="prefetch" href="/My-notes/assets/js/77.9128f0e8.js"><link rel="prefetch" href="/My-notes/assets/js/78.24611a3c.js"><link rel="prefetch" href="/My-notes/assets/js/79.ed332698.js"><link rel="prefetch" href="/My-notes/assets/js/8.68cf76ac.js"><link rel="prefetch" href="/My-notes/assets/js/80.74658711.js"><link rel="prefetch" href="/My-notes/assets/js/81.c2f7f622.js"><link rel="prefetch" href="/My-notes/assets/js/82.e409eefb.js"><link rel="prefetch" href="/My-notes/assets/js/83.a5598aeb.js"><link rel="prefetch" href="/My-notes/assets/js/84.dc75b4ba.js"><link rel="prefetch" href="/My-notes/assets/js/85.26592651.js"><link rel="prefetch" href="/My-notes/assets/js/86.a980fa3d.js"><link rel="prefetch" href="/My-notes/assets/js/87.6b86eb73.js"><link rel="prefetch" href="/My-notes/assets/js/88.d2d17093.js"><link rel="prefetch" href="/My-notes/assets/js/89.675d6bc2.js"><link rel="prefetch" href="/My-notes/assets/js/9.00ad1535.js"><link rel="prefetch" href="/My-notes/assets/js/90.9394addf.js">
    <link rel="stylesheet" href="/My-notes/assets/css/0.styles.5acd7f6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/My-notes/" class="home-link router-link-active"><!----> <span class="site-name">notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/My-notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/My-notes/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/front/htmlcss/" class="nav-link">
  HtmlCss
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/webapi/" class="nav-link">
  WebAPI
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/jquery/" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/threejs/" class="nav-link">
  ThreeJs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/backend/java/" class="nav-link">
  Java
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><span class="title">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/mobile/applets/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/mobile/application/" class="nav-link">
  uni-app
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/tools/vscode/" class="nav-link">
  VSCode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/others/utils/" class="nav-link">
  Utils
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/recording/" class="nav-link">
  随心记
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/interview/" class="nav-link">
  面试宝典
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/javadeploy/" class="nav-link">
  java配置
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/standard/" class="nav-link">
  规范
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/project/project/" class="nav-link">
  项目
</a></li></ul></div></div> <a href="https://github.com/mydb123/My-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/My-notes/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/My-notes/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/front/htmlcss/" class="nav-link">
  HtmlCss
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/webapi/" class="nav-link">
  WebAPI
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/jquery/" class="nav-link">
  jQuery
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/vue/" class="nav-link router-link-active">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/Vue3/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/react/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/front/threejs/" class="nav-link">
  ThreeJs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/backend/java/" class="nav-link">
  Java
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><span class="title">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/mobile/applets/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/mobile/application/" class="nav-link">
  uni-app
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发工具" class="dropdown-title"><span class="title">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/tools/git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/tools/vscode/" class="nav-link">
  VSCode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><span class="title">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/others/utils/" class="nav-link">
  Utils
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/recording/" class="nav-link">
  随心记
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/interview/" class="nav-link">
  面试宝典
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/javadeploy/" class="nav-link">
  java配置
</a></li><li class="dropdown-item"><!----> <a href="/My-notes/others/standard/" class="nav-link">
  规范
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目" class="dropdown-title"><span class="title">项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/My-notes/project/project/" class="nav-link">
  项目
</a></li></ul></div></div> <a href="https://github.com/mydb123/My-notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>VUE</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/My-notes/front/vue/" class="sidebar-link">首页</a></li><li><a href="/My-notes/front/vue/amap.html" class="sidebar-link">vue 中使用高德地图</a></li><li><a href="/My-notes/front/vue/chapter_01.html" class="sidebar-link">起始</a></li><li><a href="/My-notes/front/vue/chapter_02.html" class="sidebar-link">常用特性</a></li><li><a href="/My-notes/front/vue/chapter_03.html" class="sidebar-link">组件</a></li><li><a href="/My-notes/front/vue/chapter_04.html" class="sidebar-link">Vuex</a></li><li><a href="/My-notes/front/vue/chapter_05.html" class="active sidebar-link">vue3.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#初始化项目" class="sidebar-link">初始化项目</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#setup" class="sidebar-link">setup</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#reactive" class="sidebar-link">reactive</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#定义响应式数据供-template-使用" class="sidebar-link">定义响应式数据供 template 使用</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#ref" class="sidebar-link">ref</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#在-template-中访问-ref-创建的响应式数据" class="sidebar-link">在 template 中访问 ref 创建的响应式数据</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#在-reactive-对象中访问-ref-创建的响应式数据" class="sidebar-link">在 reactive 对象中访问 ref 创建的响应式数据</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#isref" class="sidebar-link">isRef</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#torefs" class="sidebar-link">toRefs</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#清除监视" class="sidebar-link">清除监视</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#provide-inject" class="sidebar-link">provide &amp; inject</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#template-refs" class="sidebar-link">template refs</a></li><li class="sidebar-sub-header"><a href="/My-notes/front/vue/chapter_05.html#nexttick" class="sidebar-link">nexttick</a></li></ul></li><li><a href="/My-notes/front/vue/chapter_06.html" class="sidebar-link">关于vue的知识</a></li><li><a href="/My-notes/front/vue/chapter_07.html" class="sidebar-link">vue3.0(2)</a></li><li><a href="/My-notes/front/vue/project_01.html" class="sidebar-link">项目</a></li><li><a href="/My-notes/front/vue/project_02.html" class="sidebar-link">项目(2)</a></li><li><a href="/My-notes/front/vue/project_03.html" class="sidebar-link">项目(3)</a></li><li><a href="/My-notes/front/vue/project_04.html" class="sidebar-link">Vue项目模块分析</a></li><li><a href="/My-notes/front/vue/project_05.html" class="sidebar-link">优化</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="初始化项目"><a href="#初始化项目" class="header-anchor">#</a> 初始化项目</h2> <ol><li>安装vue-cli3</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token function">npm</span> <span class="token function">install</span> -g @vue/cli
    <span class="token comment"># OR</span>
    <span class="token function">yarn</span> global <span class="token function">add</span> @vue/cli
</code></pre></div><ol start="2"><li>创建项目</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>    vue create my-project
    <span class="token comment"># OR</span>
    vue ui
</code></pre></div><ol start="3"><li>在项目中安装 <code>composition-api</code> 体验 vue3 新特性</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token function">npm</span> <span class="token function">install</span> @vue/composition-api --save
    <span class="token comment"># OR</span>
    <span class="token function">yarn</span> <span class="token function">add</span> @vue/composition-api
</code></pre></div><ol start="4"><li>在使用任何 <code>@vue/composition-api</code> 提供的能力前，必须先通过 <code>Vue.use()</code> 进行安装</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token function">import</span> Vue from <span class="token string">'vue'</span>
    <span class="token function">import</span> VueCompositionApi from <span class="token string">'@vue/composition-api'</span>

    Vue.use<span class="token punctuation">(</span>VueCompositionApi<span class="token punctuation">)</span>
</code></pre></div><h2 id="setup"><a href="#setup" class="header-anchor">#</a> setup</h2> <p><code>setup</code> 函数会在 <code>beforeCreate</code> 之后、<code>created</code> 之前执行</p> <ol><li><p>接收props数据
<img src="/My-notes/front/vue/vue3.0(steup).jpg"> <img src="/My-notes/front/vue/vue3.0(steup2).jpg"></p></li> <li><p>context
<code>setup</code> 函数的第二个形参是一个上下文对象，这个上下文对象中包含了一些有用的属性，这些属性在 <code>vue 2.x</code> 中需要通过 <code>this</code> 才能访问到，在 <code>vue 3.x</code> 中，它们的访问方式如下：
<strong>注意:在 setup() 函数中无法访问到 this</strong></p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span>attrs
        context<span class="token punctuation">.</span>slots
        context<span class="token punctuation">.</span>parent
        context<span class="token punctuation">.</span>root
        context<span class="token punctuation">.</span>emit
        context<span class="token punctuation">.</span>refs
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="reactive"><a href="#reactive" class="header-anchor">#</a> reactive</h2> <p><code>reactive()</code> 函数接收一个普通对象，返回一个响应式的数据对象。</p> <ol><li>基本语法
等价于 <code>vue 2.x</code> 中的 Vue.observable() 函数，<code>vue 3.x</code> 中提供了 <code>reactive()</code> 函数，用来创建响应式的数据对象，基本代码示例如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token comment">// 创建响应式数据对象，得到的 state 类似于 vue 2.x 中 data() 返回的响应式对象</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="定义响应式数据供-template-使用"><a href="#定义响应式数据供-template-使用" class="header-anchor">#</a> 定义响应式数据供 template 使用</h2> <ol><li>按需导入 reactive 函数：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>
</code></pre></div><ol start="2"><li>在 setup() 函数中调用 reactive() 函数，创建响应式数据对象：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// 创建响应式数据对象</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

     <span class="token comment">// setup 函数中将响应式数据对象 return 出去，供 template 使用</span>
    <span class="token keyword">return</span> state
<span class="token punctuation">}</span>
</code></pre></div><ol start="3"><li>在 template 中访问响应式数据：</li></ol> <div class="language-html extra-class"><pre class="language-html"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>当前的 count 值为：{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h2> <p><code>ref()</code> 函数用来根据给定的值创建一个<strong>响应式</strong>的<strong>数据对象</strong>，<code>ref()</code> 函数调用的返回值是一个对象，这个对象上只包含一个 .value 属性：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token comment">// 创建响应式数据对象 count，初始值为 0</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token comment">// 如果要访问 ref() 创建出来的响应式数据对象的值，必须通过 .value 属性才可以</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 输出 0</span>
    <span class="token comment">// 让 count 的值 +1</span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span>
    <span class="token comment">// 再次打印 count 的值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 输出 1</span>
</code></pre></div><h2 id="在-template-中访问-ref-创建的响应式数据"><a href="#在-template-中访问-ref-创建的响应式数据" class="header-anchor">#</a> 在 template 中访问 ref 创建的响应式数据</h2> <ol><li>在 setup() 中创建响应式数据</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            count<span class="token punctuation">,</span>
            name<span class="token operator">:</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>在 template 中访问响应式数据：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre></div><h2 id="在-reactive-对象中访问-ref-创建的响应式数据"><a href="#在-reactive-对象中访问-ref-创建的响应式数据" class="header-anchor">#</a> 在 reactive 对象中访问 ref 创建的响应式数据</h2> <p>当把 <code>ref()</code> 创建出来的响应式数据对象，挂载到 <code>reactive()</code> 上时，会自动把响应式数据对象展开为原始的值，不需通过 <code>.value</code> 就可以直接被访问，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    count
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 输出 0</span>
    state<span class="token punctuation">.</span>count<span class="token operator">++</span> <span class="token comment">// 此处不需要通过 .value 就能直接访问原始值</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 输出 1</span>
</code></pre></div><p>注意：新的 ref 会覆盖旧的 ref，示例代码如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 创建 ref 并挂载到 reactive 中</span>
    <span class="token keyword">const</span> c1 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    c1
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 再次创建 ref，命名为 c2</span>
    <span class="token keyword">const</span> c2 <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
    <span class="token comment">// 将 旧 ref c1 替换为 新 ref c2</span>
    state<span class="token punctuation">.</span>c1 <span class="token operator">=</span> c2
    state<span class="token punctuation">.</span>c1<span class="token operator">++</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>c1<span class="token punctuation">)</span> <span class="token comment">// 输出 10</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c2<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 输出 10</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c1<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 输出 0</span>
</code></pre></div><h2 id="isref"><a href="#isref" class="header-anchor">#</a> isRef</h2> <p><code>isRef()</code> 用来判断某个值是否为 ref() 创建出来的对象；应用场景：当需要展开某个可能为 ref() 创建出来的值的时候，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> isRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">const</span> unwrapped <span class="token operator">=</span> <span class="token function">isRef</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token operator">?</span> foo<span class="token punctuation">.</span>value <span class="token operator">:</span> foo
</code></pre></div><h2 id="torefs"><a href="#torefs" class="header-anchor">#</a> toRefs</h2> <p><code>toRefs()</code> 函数可以将 <code>reactive()</code> 创建出来的响应式对象，转换为普通的对象，只不过，这个对象上的每个属性节点，都是 <code>ref()</code> 类型的响应式数据，最常见的应用场景如下：
<img src="/My-notes/front/vue/torefs.png"></p> <h2 id="computed"><a href="#computed" class="header-anchor">#</a> computed</h2> <p>computed() 用来创建计算属性，computed() 函数的返回值是一个 ref 的实例。使用 computed 之前需要按需导入：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>
</code></pre></div><ol><li>在调用 computed() 函数期间，传入一个 function 函数，可以得到一个只读的计算属性，示例代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 创建一个 ref 响应式数据</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token comment">// 根据 count 的值，创建一个响应式的计算属性 plusOne</span>
    <span class="token comment">// 它会根据依赖的 ref 自动计算并返回一个新的 ref</span>
    <span class="token keyword">const</span> plusOne <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>plusOne<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 输出 2</span>
    plusOne<span class="token punctuation">.</span>value<span class="token operator">++</span> <span class="token comment">// error</span>
</code></pre></div><ol start="2"><li>创建可读可写的计算属性
在调用 computed() 函数期间，传入一个包含 get 和 set 函数的对象，可以得到一个可读可写的计算属性，示例代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 创建一个 ref 响应式数据</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token comment">// 创建一个 computed 计算属性</span>
    <span class="token keyword">const</span> plusOne <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 取值函数</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token comment">// 赋值函数</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">.</span>value <span class="token operator">=</span> val <span class="token operator">-</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 为计算属性赋值的操作，会触发 set 函数</span>
    plusOne<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">9</span>
    <span class="token comment">// 触发 set 函数后，count 的值会被更新</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 输出 8</span>
</code></pre></div><h2 id="watch"><a href="#watch" class="header-anchor">#</a> watch</h2> <ol><li><code>watch()</code> 函数用来监视某些数据项的变化，从而触发某些特定的操作，使用之前需要按需导入</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">import</span> <span class="token punctuation">{</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token comment">// 定义 watch，只要 count 值变化，就会触发 watch 回调</span>
        <span class="token comment">// watch 会在创建时会自动调用一次</span>
        <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">// 输出 0</span>

        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        count<span class="token punctuation">.</span>value<span class="token operator">++</span>
        <span class="token comment">// 输出 1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>监视 reactive 类型的数据源：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 定义数据源</span>
    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 监视 state.count 这个数据节点的变化</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>监视 ref 类型的数据源：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 定义数据源</span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token comment">// 指定要监视的数据源</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>监视多个数据源监视 reactive 类型的数据源：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'zs'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token function">watch</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// Object.values(toRefs(state)),</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>count<span class="token punctuation">,</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>prevCount<span class="token punctuation">,</span> prevName<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token comment">// 新的 count 值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment">// 新的 name 值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'------------'</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prevCount<span class="token punctuation">)</span> <span class="token comment">// 旧的 count 值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prevName<span class="token punctuation">)</span> <span class="token comment">// 新的 name 值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        lazy<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 在 watch 被创建的时候，不执行回调函数中的代码</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>count<span class="token operator">++</span>
    state<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'ls'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><ol start="4"><li>监视 ref 类型的数据源：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'zs'</span><span class="token punctuation">)</span>

    <span class="token function">watch</span><span class="token punctuation">(</span>
    <span class="token punctuation">[</span>count<span class="token punctuation">,</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 需要被监视的多个 ref 数据源</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>count<span class="token punctuation">,</span> name<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>prevCount<span class="token punctuation">,</span> prevName<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'-------------'</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prevCount<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prevName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        lazy<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span>
    name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'xiaomaolv'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="清除监视"><a href="#清除监视" class="header-anchor">#</a> 清除监视</h2> <p>在 setup() 函数内创建的 watch 监视，会在当前组件被销毁的时候自动停止。如果想要明确地停止某个监视，可以调用 watch() 函数的返回值即可，语法如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 创建监视，并得到 停止函数</span>
    <span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 调用停止函数，清除对应的监视</span>
    <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol><li>在 watch 中清除无效的异步任务
有时候，当被 <code>watch</code> 监视的值发生变化时，或 <code>watch</code> 本身被 <code>stop</code> 之后，我们期望能够清除那些无效的异步任务，此时，<code>watch</code> 回调函数中提供了一个 <code>cleanup registrator function</code> 来执行清除的工作。这个清除函数会在如下情况下被调用：</li></ol> <ul><li>watch 被重复执行了</li> <li>watch 被强制 stop 了
Template 中的代码示例如下：</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>    /* template 中的代码 */ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>keywords<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>Script 中的代码示例如下:</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 定义响应式数据 keywords</span>
    <span class="token keyword">const</span> keywords <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>

    <span class="token comment">// 异步任务：打印用户输入的关键词</span>
    <span class="token keyword">const</span> <span class="token function-variable function">asyncPrint</span> <span class="token operator">=</span> <span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 延时 1 秒后打印</span>
    <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 定义 watch 监听</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>
    keywords<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">keywords<span class="token punctuation">,</span> prevKeywords<span class="token punctuation">,</span> onCleanup</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 执行异步任务，并得到关闭异步任务的 timerId</span>
        <span class="token keyword">const</span> timerId <span class="token operator">=</span> <span class="token function">asyncPrint</span><span class="token punctuation">(</span>keywords<span class="token punctuation">)</span>

        <span class="token comment">// 如果 watch 监听被重复执行了，则会先清除上次未完成的异步任务</span>
        <span class="token function">onCleanup</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timerId<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// watch 刚被创建的时候不执行</span>
    <span class="token punctuation">{</span> lazy<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// 把 template 中需要的数据 return 出去</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
    keywords
    <span class="token punctuation">}</span>

</code></pre></div><p><strong>下面的列表，是 vue 2.x 的生命周期函数与新版 Composition API 之间的映射关系：</strong></p> <ul><li>beforeCreate -&gt; use setup()</li> <li>created -&gt; use setup()</li> <li>beforeMount -&gt; onBeforeMount</li> <li>mounted -&gt; onMounted</li> <li>beforeUpdate -&gt; onBeforeUpdate</li> <li>updated -&gt; onUpdated</li> <li>beforeDestroy -&gt; onBeforeUnmount</li> <li>destroyed -&gt; onUnmounted</li> <li>errorCaptured -&gt; onErrorCaptured</li></ul> <h2 id="provide-inject"><a href="#provide-inject" class="header-anchor">#</a> provide &amp; inject</h2> <p>provide() 和 inject() 可以实现嵌套组件之间的数据传递。这两个函数只能在 setup() 函数中使用。父级组件中使用 provide() 函数向下传递数据；子级组件中使用 inject() 获取上层传递过来的数据。</p> <ol><li>共享普通数据
App.vue 根组件：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>        <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App 根组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>LevelOne <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> LevelOne <span class="token keyword">from</span> <span class="token string">'./components/LevelOne'</span>
    <span class="token comment">// 1. 按需导入 provide</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> provide <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2. App 根组件作为父级组件，通过 provide 函数向子级组件共享数据（不限层级）</span>
        <span class="token comment">//    provide('要共享的数据名称', 被共享的数据)</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'globalColor'</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
        LevelOne
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>One.vue 组件：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">4.</span> 通过属性绑定，为标签设置字体颜色 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3 <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{color: themeColor}&quot;</span><span class="token operator">&gt;</span>Level One<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>LevelTwo <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> LevelTwo <span class="token keyword">from</span> <span class="token string">'./LevelTwo'</span>
    <span class="token comment">// 1. 按需导入 inject</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2. 调用 inject 函数时，通过指定的数据名称，获取到父级共享的数据</span>
        <span class="token keyword">const</span> themeColor <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'globalColor'</span><span class="token punctuation">)</span>

        <span class="token comment">// 3. 把接收到的共享数据 return 给 Template 使用</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
        themeColor
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
        LevelTwo
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>Two.vue 组件：</p> <div class="language-js extra-class"><pre class="language-js"><code>        <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">4.</span> 通过属性绑定，为标签设置字体颜色 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h5 <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{color: themeColor}&quot;</span><span class="token operator">&gt;</span>Level Two<span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token comment">// 1. 按需导入 inject</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 2. 调用 inject 函数时，通过指定的数据名称，获取到父级共享的数据</span>
        <span class="token keyword">const</span> themeColor <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'globalColor'</span><span class="token punctuation">)</span>

        <span class="token comment">// 3. 把接收到的共享数据 return 给 Template 使用</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
        themeColor
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ol start="2"><li>共享 ref 响应式数据
如下代码实现了点按钮切换主题颜色的功能，主要修改了 App.vue 组件中的代码，LevelOne.vue 和 LevelTwo.vue 中的代码不受任何改变：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>App 根组件<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 点击 App<span class="token punctuation">.</span>vue 中的按钮，切换子组件中文字的颜色 <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;themeColor='red'&quot;</span><span class="token operator">&gt;</span>红色<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;themeColor='blue'&quot;</span><span class="token operator">&gt;</span>蓝色<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;themeColor='orange'&quot;</span><span class="token operator">&gt;</span>橘黄色<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>LevelOne <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> LevelOne <span class="token keyword">from</span> <span class="token string">'./components/LevelOne'</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> provide<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 定义 ref 响应式数据</span>
        <span class="token keyword">const</span> themeColor <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span>

        <span class="token comment">// 把 ref 数据通过 provide 提供的子组件使用</span>
        <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'globalColor'</span><span class="token punctuation">,</span> themeColor<span class="token punctuation">)</span>

        <span class="token comment">// setup 中 return 数据供当前组件的 Template 使用</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
        themeColor
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    components<span class="token operator">:</span> <span class="token punctuation">{</span>
        LevelOne
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="template-refs"><a href="#template-refs" class="header-anchor">#</a> template refs</h2> <p>通过 ref() 还可以引用页面上的元素或组件。</p> <ol><li>元素的引用</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3 ref<span class="token operator">=</span><span class="token string">&quot;h3Ref&quot;</span><span class="token operator">&gt;</span>TemplateRefOne<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个 DOM 引用</span>
        <span class="token keyword">const</span> h3Ref <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

        <span class="token comment">// 在 DOM 首次加载完毕之后，才能获取到元素的引用</span>
        <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 为 dom 元素设置字体颜色</span>
        <span class="token comment">// h3Ref.value 是原生DOM对象</span>
        h3Ref<span class="token punctuation">.</span>value<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token comment">// 把创建的引用 return 出去</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
        h3Ref
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><ol start="2"><li>组件的引用
TemplateRefOne.vue 中的示例代码如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>TemplateRefOne<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">4.</span> 点击按钮展示子组件的 count 值 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;showNumber&quot;</span><span class="token operator">&gt;</span>获取TemplateRefTwo中的count值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">3.</span> 为组件添加 ref 引用 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>TemplateRefTwo ref<span class="token operator">=</span><span class="token string">&quot;comRef&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>
<span class="token keyword">import</span> TemplateRefTwo <span class="token keyword">from</span> <span class="token string">'./TemplateRefTwo'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 创建一个组件的 ref 引用</span>
    <span class="token keyword">const</span> comRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

    <span class="token comment">// 5. 展示子组件中 count 的值</span>
    <span class="token keyword">const</span> <span class="token function-variable function">showNumber</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>comRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2. 把创建的引用 return 出去</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      comRef<span class="token punctuation">,</span>
      showNumber
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    TemplateRefTwo
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p>TemplateRefTwo.vue 中的示例代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h5<span class="token operator">&gt;</span>TemplateRefTwo <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">3.</span> 点击按钮，让 count 值自增 <span class="token operator">+</span><span class="token number">1</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;count+=1&quot;</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vue/composition-api'</span>

    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1. 定义响应式的数据</span>
        <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token comment">// 2. 把响应式数据 return 给 Template 使用</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
        count
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h2 id="nexttick"><a href="#nexttick" class="header-anchor">#</a> nexttick</h2> <p>文本框显示获取焦点
<img src="/My-notes/front/vue/nexttick.jpg"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020-11-25 09:12:48</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/My-notes/front/vue/chapter_04.html" class="prev">
        Vuex
      </a></span> <span class="next"><a href="/My-notes/front/vue/chapter_06.html">
        关于vue的知识
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/My-notes/assets/js/app.4737a346.js" defer></script><script src="/My-notes/assets/js/2.a0b16310.js" defer></script><script src="/My-notes/assets/js/48.fb967445.js" defer></script><script src="/My-notes/assets/js/3.d5588be5.js" defer></script>
  </body>
</html>
